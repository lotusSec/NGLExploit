import requests
import threading
import random
import time

# Function to detect device type (in a basic way, since Python can't directly access device information like JavaScript)
def detect_device():
    # Since Python scripts are usually run on desktop/laptop, we can assume that
    return "Laptop or Desktop"

# Function to get public IP information
def get_ip_info():
    response = requests.get("https://ipapi.co/json/")
    if response.status_code == 200:
        data = response.json()
        return {
            "ip_address": data["ip"],
            "country_name": data["country_name"],
            "isp": data["org"],
            "latitude": data["latitude"],
            "longitude": data["longitude"]
        }
    return None

# Function to get IPv4 address
def get_ipv4_address():
    response = requests.get("https://ipv4.icanhazip.com")
    if response.status_code == 200:
        return response.text.strip()
    return None

# Main functionality similar to what the JavaScript does
class NGLDeleter:
    def __init__(self):
        self.is_running = False
        self.xhr_threads = []
        self.username = ""
        self.device_id = self.generate_random_device_id()
        self.game_slug = random.choice(['confessions', '3words', 'wfriendship', 'rizzme', 'tbh', 'shipme', 'yourcrush', 'cancelled', 'dealbreaker'])

    def generate_random_device_id(self):
        return ''.join(random.choices('abcdefghijklmnopqrstuvwxyz0123456789', k=26))

    def start(self, username):
        self.username = username
        self.is_running = True
        print(f"Starting NGL Deleter for {username}")

        def send_request():
            while self.is_running:
                url = "https://ngl.link/api/submit"
                headers = {
                    "Accept": "*/*",
                    "Accept-Encoding": "gzip, deflate, br",
                    "Accept-Language": "en-US,en;q=0.9",
                    "Content-Type": "application/x-www-form-urlencoded; charset=UTF-8",
                    "Host": "ngl.link",
                    "Origin": "https://ngl.link",
                    "Referer": f"https://ngl.link/@{username}",
                    "User-Agent": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36"
                }
                data = {
                    "username": username,
                    "question": "function(deleter):____reset(fuck_you_)",
                    "deviceId": self.device_id,
                    "gameSlug": self.game_slug
                }

                response = requests.post(url, data=data, headers=headers)
                print(f"Request sent: {response.status_code}")
                time.sleep(1)

        thread = threading.Thread(target=send_request)
        self.xhr_threads.append(thread)
        thread.start()

    def stop(self):
        print("Stopping NGL Deleter...")
        self.is_running = False
        for thread in self.xhr_threads:
            if thread.is_alive():
                thread.join()
        self.xhr_threads = []

if __name__ == "__main__":
    deleter = NGLDeleter()

    # Get IP information and print it
    ip_info = get_ip_info()
    ipv4_address = get_ipv4_address()

    if ip_info:
        print(f"IPv6 Address: {ip_info['ip_address']}")
        print(f"Country Name: {ip_info['country_name']}")
        print(f"ISP: {ip_info['isp']}")
        print(f"Latitude: {ip_info['latitude']}")
        print(f"Longitude: {ip_info['longitude']}")
    if ipv4_address:
        print(f"IPv4 Address: {ipv4_address}")

    # Example usage
    username = input("Enter username: ")
    deleter.start(username)

    try:
        while True:
            time.sleep(0.1)
    except KeyboardInterrupt:
        deleter.stop()